@inject IJSRuntime JSRuntime

<!-- Floating Table of Contents (Desktop Only) -->
<div class="fixed top-1/2 right-6 -translate-y-1/2 z-40 hidden lg:flex flex-col gap-3 items-end pointer-events-none">
    <!-- Pointer events auto ensures only clicks on links register, passing through clicks elsewhere -->

    <a href="#" class="pointer-events-auto group flex items-center gap-3 transition-opacity duration-300 opacity-60 hover:opacity-100 mb-1">
        <span class="text-[10px] font-bold tracking-widest uppercase text-slate-400 group-hover:text-accent transition-colors duration-300 text-shadow-sm">Top</span>
        <div class="flex items-center justify-center h-3 w-3 rounded-full border border-slate-400 group-hover:border-accent transition-colors duration-300">
            <span class="material-symbols-outlined text-[8px] text-slate-400 group-hover:text-accent">arrow_upward</span>
        </div>
    </a>

    <a href="#mayor-critique" class="toc-link pointer-events-auto group flex items-center gap-3 transition-opacity duration-300 opacity-60 hover:opacity-100" data-target="mayor-critique">
        <span class="text-[10px] font-bold tracking-widest uppercase text-slate-400 group-[.active]:text-accent transition-colors duration-300 text-shadow-sm">Decoding The Spin</span>
        <div class="h-2 w-2 rounded-full bg-slate-400 group-hover:bg-accent transition-all duration-300 group-[.active]:scale-125 shadow-sm block"></div>
    </a>

    <a href="#economic-analysis" class="toc-link pointer-events-auto group flex items-center gap-3 transition-opacity duration-300 opacity-60 hover:opacity-100" data-target="economic-analysis">
        <span class="text-[10px] font-bold tracking-widest uppercase text-slate-400 group-[.active]:text-accent transition-colors duration-300 text-shadow-sm">Economic Impact Calculator</span>
        <div class="h-2 w-2 rounded-full bg-slate-400 group-hover:bg-accent transition-all duration-300 group-[.active]:scale-125 shadow-sm block"></div>
    </a>

    <a href="#economic-analysis-part-2" class="toc-link pointer-events-auto group flex items-center gap-3 transition-opacity duration-300 opacity-60 hover:opacity-100" data-target="economic-analysis-part-2">
        <span class="text-[10px] font-bold tracking-widest uppercase text-slate-400 group-[.active]:text-accent transition-colors duration-300 text-shadow-sm">Economic Substitution Effect</span>
        <div class="h-2 w-2 rounded-full bg-slate-400 group-hover:bg-accent transition-all duration-300 group-[.active]:scale-125 shadow-sm block"></div>
    </a>

    <a href="#tribal-analysis" class="toc-link pointer-events-auto group flex items-center gap-3 transition-opacity duration-300 opacity-60 hover:opacity-100" data-target="tribal-analysis">
        <span class="text-[10px] font-bold tracking-widest uppercase text-slate-400 group-[.active]:text-accent transition-colors duration-300 text-shadow-sm">Tribal Fact Check</span>
        <div class="h-2 w-2 rounded-full bg-slate-400 group-hover:bg-accent transition-all duration-300 group-[.active]:scale-125 shadow-sm block"></div>
    </a>

    <a href="#crime-safety" class="toc-link pointer-events-auto group flex items-center gap-3 transition-opacity duration-300 opacity-60 hover:opacity-100" data-target="crime-safety">
        <span class="text-[10px] font-bold tracking-widest uppercase text-slate-400 group-[.active]:text-accent transition-colors duration-300 text-shadow-sm">Crime & Safety</span>
        <div class="h-2 w-2 rounded-full bg-slate-400 group-hover:bg-accent transition-all duration-300 group-[.active]:scale-125 shadow-sm block"></div>
    </a>

    <a href="#voice-your-opinion" class="toc-link pointer-events-auto group flex items-center gap-3 transition-opacity duration-300 opacity-60 hover:opacity-100" data-target="voice-your-opinion">
        <span class="text-[10px] font-bold tracking-widest uppercase text-slate-400 group-[.active]:text-accent transition-colors duration-300 text-shadow-sm">Take Action</span>
        <div class="h-2 w-2 rounded-full bg-slate-400 group-hover:bg-accent transition-all duration-300 group-[.active]:scale-125 shadow-sm block"></div>
    </a>
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("window.TOC.init");
        }
    }
}
